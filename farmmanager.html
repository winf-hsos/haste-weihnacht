<!DOCTYPE html>
<html lang="en">
    
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" shrink-to-fit="no">

    <!--Sylesheets-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/stylefarm.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Kodchasan|Roboto" rel="stylesheet">
    <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!--Shortcuticon/favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">
    <title>hasteWeihnacht by Hochschule Osnabrück</title>
</head>

<body>
    <div class="container-fluid">
        <div class="backgroundHeadFarmManager">
            <div><br></div>
            <div class="row" id="header">
                <div class="col-md-12 respnav-right" id="navigationCol" hidden>
                    <nav class="navbar navbar-expand-sm navbar-light bg-light">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>
                        <div class="collapse navbar-collapse respnav-right" id="navbarSupportedContent">
                            <ul class="navbar-nav mr-auto nav-right">
                                <li class="nav-item active"> <a id="loginHidden" data-toggle="modal" data-target="#loginModal" href="#">Einloggen</a>
                                    <a id="homeHidden" href="index.html" hidden> Home</a>
                                </li>
                                <li class="nav-item">
                                    <a id="registerHidden" data-toggle="modal" data-target="#registerModal" href="#">Registrieren</a>
                                    <a id="myAccountHidden" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#" hidden>Mein Account
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item" href="registration.html">Mein Profil</a>
                                    <a class="dropdown-item" href="seller.html">Accountmanagement</a>
                                    <a class="dropdown-item" href="productoffer.html">Produktsuche</a>
                                    <a class="dropdown-item" id="logoutHidden" onclick="logout()" href="#" hidden>
                                        <hr>Ausloggen</a>
                        </div>
                        </a>
                        </li>
                        <li class="nav-item"><a href="inprogress.html">Hilfe</a></li>
                        <li class="nav-item"><a href="team.html">About us</a></li>
                        </ul>
                </div>
                </nav>
            </div>
        </div>
        
        <!-- Modal Register -->
        <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title col-md-12 modalTitleCenter">Registrierung</h5>
                    </div>
                    <div class="modal-body">
                        <div>
                            <h2 class="headParagraphModal"><span class="headParagraphModal" style="color:#CC0C0C">haste</span>&nbsp;|&nbsp;Interesse?</h2>
                            <p class="lp">
                                Dann registrier dich gleich, um Produkte kaufen oder verkaufen zu können. Sei dabei und unterstütze den Direktvertrieb von regionalen Produkten.
                            </p>
                        </div>
                        <div class="col-md-12 modalFormPosition">
                            <div class="formRegisterLogin">
                                <div class="form-group">
                                    <label for="inputEmail"></label>
                                    <input type="email" class="form-control" id="inputEmail" placeholder="Enter E-Mail" />
                                </div>
                                <div class="form-group">
                                    <label for="inputPassword"></label>
                                    <input type="password" class="form-control" id="inputPassword" placeholder="Enter Password" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- When this is clicked, register() is called -->
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button id="btnRegister" onclick="register()" class="btn btn-danger" role="button">Registrieren</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal login -->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title col-md-12 modalTitleCenter">Login</h5>
                    </div>
                    <div class="modal-body">
                        <div class="col-md-12" id="loginPic">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="160" height="160" viewBox="0 0 100 100"><g><g transform="translate(50 50) scale(0.69 0.69) rotate(0) translate(-50 -50)" style="fill:#000000;"><svg fill="#000000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;" viewBox="0 0 229 285" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd"><defs><style type="text/css"> .fil0 {fill:#000000} </style></defs><g><path class="fil0" d="M229 88c-3,-5 -33,-12 -57,2 -10,5 -16,11 -19,17 -4,-4 -8,-8 -13,-11 35,-20 71,-46 71,-91 0,-7 -11,-7 -11,0 0,27 -16,47 -34,61 3,-17 2,-36 0,-53 -1,-7 -11,-6 -10,1 2,19 3,43 -3,62 -7,5 -15,9 -22,13 -1,1 -1,1 -2,2 -5,-2 -9,-3 -14,-3 -5,0 -10,1 -15,3 0,-1 -1,-1 -1,-2 -8,-4 -16,-8 -23,-13 -6,-19 -4,-43 -2,-62 1,-7 -10,-8 -11,-1 -2,17 -3,36 0,53 -18,-14 -34,-34 -34,-61 0,-7 -10,-7 -10,0 0,45 36,71 70,91 -4,3 -9,7 -13,11 -3,-6 -9,-12 -19,-17 -24,-14 -54,-7 -56,-2 -3,5 6,34 30,48 7,4 14,7 20,7 -13,25 -20,53 -20,74 0,91 168,91 168,0 0,-21 -8,-49 -20,-74 5,0 12,-3 20,-7 24,-14 33,-43 30,-48zm-114 116c22,0 40,15 40,32 0,18 -18,32 -40,32 -23,0 -41,-14 -41,-32 0,-18 18,-32 41,-32zm0 8c9,0 17,5 17,11 0,6 -8,10 -17,10 -10,0 -18,-4 -18,-10 0,-6 8,-11 18,-11zm24 -54c-5,0 -10,5 -10,11 0,5 5,10 10,10 6,0 11,-5 11,-10 0,-6 -5,-11 -11,-11zm-49 0c6,0 10,5 10,11 0,5 -4,10 -10,10 -6,0 -10,-5 -10,-10 0,-6 4,-11 10,-11zm103 59c0,-21 -7,-46 -16,-64 -10,-23 -33,-60 -62,-60 -29,0 -52,37 -63,60 -8,18 -16,43 -16,64 0,84 157,84 157,0z"></path></g></svg></g>
                            </g>
                            </svg>
                        </div>
                        <!-- When this is clicked, validate() is called -->
                        <p>Melde dich an, wenn du über ein Konto verfügst oder <a class="linkStyle" href="registration.html">registriere dich</a> jetzt kostenlos! </p>
                        <div class="col-md-12 modalFormPosition">
                            <form class="formRegisterLogin">

                                <input type="email" name="usermail" id="userMail" class="form-control" aria-describedby="emailHelp" placeholder="Email" /><br>

                                <input type="password" name="pswrd" id="userPassword" class="form-control" placeholder="Password" />
                            </form>
                        </div>
                        <br>
                        <div class="col-md-12 modalFormPosition">
                            <p style="color:#CC0C0C" id="errorLogin"></p>
                        </div>
                        <p>Nutze alternativ die Anmeldung über Dritte:</p>
                        <div class="col-md-12 headThirdParty">
                            <h5>Social Login</h5>
                        </div>
                        <div class="col-md-12 socialLogin">
                            <img class="socialSymbols" src="img/social_logos/facebookloginws.png" alt="pic">&nbsp;&nbsp;&nbsp;&nbsp;
                            <img class="socialSymbols" src="img/social_logos/twitterloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                            <img class="socialSymbols" src="img/social_logos/instaloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                            <img class="socialSymbols" src="img/social_logos/googleloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button onclick="clear()" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button onclick="validate()" value="Login" class="btn btn-danger">Login</button>
                    </div>
                </div>
            </div>
        </div>
        
        <br><br><br><br>
        
        <div class="row farmData">
            <div class="col-md-12 farmTransparentBox">
                <div class="row justify-content-center">
                    <h3 class="lph"><span class="lph" style="color:#CC0C0C">dein</span>&nbsp;|&nbsp;Hof</h3>
                </div>
                <div class="row justify-content-center">
                    <div class="col-md-6 farmForm">
                        <p>
                            Hier kannst du die Informationsseite um deinen Hof bearbeiten. Die Benutzer freuen sich über möglichst viele Informationen zu der Geschichte hinter deinem Familienbetrieb. Sobald du auf <span style="color:#CC0C0C">Kartenposition speichern</span>                            drückst, wird der Standort deines Hofes auf unserer Übersichtskarte angezeigt und mit einem Klick werden die Benutzer auf deine Hofseite weitergeleitet.
                        </p>
                        <div class="col-md-12 farmForm">
                            <div class="form-group1">
                                <label for="inputHofname"></label>
                                <input type="text" class="form-control" id="inputHofname" placeholder="Hofname" />
                            </div>
                        </div>

                        <div class="row justify-content-center">
                            <div class="col-md-6 farmForm">
                                <div class="form-group1">
                                    <label for="inputAdresseHof"></label>
                                    <input type="text" class="form-control" id="inputAdresseHof" placeholder="Adresse" />
                                </div>
                                <div class="form-group1">
                                    <label for="inputPLZHof"></label>
                                    <input type="text" class="form-control" id="inputPLZHof" placeholder="PLZ" />
                                </div>
                                <hr>
                            </div>
                            
                            <div class="col-md-6 farmForm">
                                <div class="form-group1">
                                    <label for="inputHnummerHof"></label>
                                    <input type="text" class="form-control" id="inputHnummerHof" placeholder="Hausnummer" />
                                </div>
                                <div class="form-group1">
                                    <label for="inputStadtHof"></label>
                                    <input type="text" class="form-control" id="inputStadtHof" placeholder="Stadt" />
                                </div>
                                <hr>
                                <div>
                                    <button id="btnLoc" class="btn btn-danger">Kartenposition speichern</button>
                                    <p style="color:#CC0C0C" id="hofPositionSaved"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 farmPicture"><img class="img-fluid farmPic" src="img/farm_example.jpg" alt="pic">
                        <div class="col-md-12 farmForm">
                            <div class="form-group">
                                <label for="inputStory"></label>
                                <textarea class="form-control" id="inputStory" rows="7" placeholder="Die Geschichte deines Hofes..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row ranking">
        <div class="col-md-12">
            <h3 class="lph">Transparenzranking</h3>
            
            <!--- Transparenzranking --->
            <p>
                Die folgenden Angaben dienen einem <span style="color:#CC0C0C">Transparenzranking</span>. Es ist nicht entscheidend was angegeben wird sondern wichtig, dass du etwas angibst. Je mehr Informationen du den Benutzern zur Verfügung stellst,
                desto besser fällt dein Ranking aus. Unsere Benutzer wollen möglichst viel über dich und deine Produkte erfahren und kaufen bei transparenten Anbietern wahrscheinlich eher ein.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <p class="farmProfile">Deine Anbauart:</p>
                <label for="inputAnabu"></label>
                <select name="MMERGE5" id="inputAnbau" class="custom-select">
                                  <option value="">Bitte wählen</option>
                                  <option value="konventionell">konventionell</option>
                                  <option value="integriert" >integriert</option>
                                  <option value="ökologisdch">ökologisch</option>
                                </select>
            </div>
        </div>

        <div class="col-md-4 transparentRanking">
            <div>
                <p>Deine Mitarbeiterzahl:</p>
                <div class="form-group form-check">
                    <input type="radio" name="mitarbeiterRadio" class="form-check-input" id="inputMitarbeiter13">
                    <label class="form-check-label" for="inputMitarbeiter13">1 - 3 Mitarbeiter</label>
                </div>
                <div class="form-group form-check">
                    <input type="radio" name="mitarbeiterRadio" class="form-check-input" id="inputMitarbeiter46">
                    <label class="form-check-label" for="inputMitarbeiter46">4 - 6 Mitarbeiter</label>
                </div>
                <div class="form-group form-check">
                    <input type="radio" name="mitarbeiterRadio" class="form-check-input" id="inputMitarbeiter710">
                    <label class="form-check-label" for="inputMitarbeiter710">7 - 10 Mitarbeiter</label>
                </div>
            </div>
        </div>
        <div class="col-md-4 transparentRanking">
            <div class="form-group1">
                <p class="farmProfile">Dein(e) Zertifikat(e):</p>
                <label for="inputZertifikat"></label>
                <input type="checkbox" id="inputNachhaltigkeit" aria-label="Checkbox for following text input">
                <label for="inputNachhaltigkeit">Nachhaltigkeit</label><br>
                <input type="checkbox" id="inputBio" aria-label="Checkbox for following text input">
                <label for="inputBio">Bio</label><br>
                <input type="checkbox" id="inputoGent" aria-label="Checkbox for following text input">
                <label for="inputoGent">ohne Gentechnik</label><br>
                <input type="checkbox" id="inputRegio" aria-label="Checkbox for following text input">
                <label for="inputRegio">Regionalität</label><br>
            </div>
        </div>
    </div>
    <div class="row rowBtnHof">
        <p style="color:#CC0C0C" id="hofDataSaved"></p>
        &nbsp;&nbsp;
        <button id="btnHof" class="btn btn-danger">Speichern</button>
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Firebase API -->

    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>

    <!-- Firebase Tools for simpler usage -->
    <script src="https://cdn.jsdelivr.net/gh/winf-hsos/firebase-tools@0.85/src/firebase-tools.js"></script>
    <script src="js/customer.js"></script>
    <!-- Local load -->
    <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>

    <script>
        /* global firebasetools, global config  */

        firebasetools.initialize(config);
        /*global firebasetools firebase location, global $ */

        document.querySelector('#btnHof').addEventListener("click", createHofpage);
        document.querySelector('#btnLoc').addEventListener("click", saveLocation);

        firebasetools.onLoginChanged(loginChanged);
        var currentUser;

        function loginChanged(user) {
            if (user) {
                currentUser = user;
                console.dir(user);

                getHofForUser();
                getLocationUser();
         
            $('#loginModal').modal('hide');
            }
            else {
                $('#loginModal').modal({ backdrop: 'static' });
            }
        }

        var userHof = null;
        function getHofForUser() {
            firebase.firestore().collection("hofinfos")
                .where("userId", "==", currentUser.uid).get().then((querySnapshot) => {

                    // Wenn bereits ein Hof existiert, speichere das Objekt
                    if (querySnapshot.docs.length > 0) {

                        querySnapshot.forEach(function(doc) {
                            console.log(doc.id, " => ", doc.data());
                            userHof = doc.data();
                            userHof.id = doc.id;
                        });

                        fillFormValues();

                        var updateHofBtn = document.querySelector("#btnHof");
                        updateHofBtn.removeEventListener("click", createHofpage);
                        updateHofBtn.addEventListener("click", updateHofpage);
                    }
                    else {
                        console.log("Kein Hof angelegt bisher.");
                    }
                });
        }

        function fillFormValues() {
            var hofname = document.getElementById("inputHofname");
            var hausnummer = document.getElementById("inputHnummerHof");
            var plz = document.getElementById("inputPLZHof");
            var adresse = document.getElementById("inputAdresseHof");
            var stadt = document.getElementById("inputStadtHof");
            var zertNachh = document.getElementById("inputNachhaltigkeit");
            var zertBio = document.getElementById("inputBio");
            var zertoGent = document.getElementById("inputoGent");
            var zertRegio = document.getElementById("inputRegio");
            var mitarbeiter13 = document.getElementById("inputMitarbeiter13");
            var mitarbeiter46 = document.getElementById("inputMitarbeiter46");
            var mitarbeiter710 = document.getElementById("inputMitarbeiter710");
            var anbauart = document.getElementById("inputAnbau");
            var story = document.getElementById("inputStory");

            hofname.value = userHof.hofname;
            hausnummer.value = userHof.hausnummer;
            plz.value = userHof.plz;
            adresse.value = userHof.straße;
            stadt.value = userHof.stadt;
            zertNachh.checked = userHof.zertNachh;
            zertBio.checked = userHof.zertBio;
            zertoGent.checked = userHof.zertoGent;
            zertRegio.checked = userHof.zertRegio;
            mitarbeiter13.checked = userHof.mitarbeiter13;
            mitarbeiter46.checked = userHof.mitarbeiter46;
            mitarbeiter710.checked = userHof.mitarbeiter710;
            anbauart.value = userHof.anbauart;
            story.value = userHof.story;
        }

        // This function is called when the button is clicked */
        function createHofpage() {

            //Set collection name
            var collectionName = "hofinfos";
            // Get the values from the form elements */

            var hofname = document.getElementById("inputHofname").value;
            var hausnummer = document.getElementById("inputHnummerHof").value;
            var plz = document.getElementById("inputPLZHof").value;
            var adresse = document.getElementById("inputAdresseHof").value;
            var stadt = document.getElementById("inputStadtHof").value;
            var zertNachh = document.getElementById("inputNachhaltigkeit").checked;
            var zertBio = document.getElementById("inputBio").checked;
            var zertoGent = document.getElementById("inputoGent").checked;
            var zertRegio = document.getElementById("inputRegio").checked;
            var mitarbeiter13 = document.getElementById("inputMitarbeiter13").checked;
            var mitarbeiter46 = document.getElementById("inputMitarbeiter46").checked;
            var mitarbeiter710 = document.getElementById("inputMitarbeiter710").checked;
            var anbauart = document.getElementById("inputAnbau").value;
            var story = document.getElementById("inputStory").value;

            console.log(hofname);
            console.log(hausnummer);
            console.log(plz);
            console.log(adresse);
            console.log(stadt);
            console.log(zertNachh);
            console.log(zertBio);
            console.log(zertoGent);
            console.log(zertRegio);
            console.log(mitarbeiter13);
            console.log(mitarbeiter46);
            console.log(mitarbeiter710);
            console.log(anbauart);
            console.log(story);

            // Create the hofinfo object to send to the database
            var hofinfo = {
                hofname: hofname,
                hausnummer: hausnummer,
                plz: plz,
                straße: adresse,
                stadt: stadt,
                zertNachh: zertNachh,
                zertBio: zertBio,
                zertoGent: zertoGent,
                zertRegio: zertRegio,
                mitarbeiter13: mitarbeiter13,
                mitarbeiter46: mitarbeiter46,
                mitarbeiter710: mitarbeiter710,
                anbauart: anbauart,
                story: story,
                userId: currentUser.uid,
            };
            // Print the hofinfo object to the console for debugging
            console.dir(hofinfo);
            

            firebasetools.addContentItem("hofinfos", hofinfo, hofItemAdded);
        }

        function hofItemAdded() {
            console.log("Hofinfo item successfully added!");
            location.reload();
        }
        
        function updateHofpage() {

            var hofname = document.getElementById("inputHofname").value;
            var hausnummer = document.getElementById("inputHnummerHof").value;
            var plz = document.getElementById("inputPLZHof").value;
            var adresse = document.getElementById("inputAdresseHof").value;
            var stadt = document.getElementById("inputStadtHof").value;
            var zertNachh = document.getElementById("inputNachhaltigkeit").checked;
            var zertBio = document.getElementById("inputBio").checked;
            var zertoGent = document.getElementById("inputoGent").checked;
            var zertRegio = document.getElementById("inputRegio").checked;
            var mitarbeiter13 = document.getElementById("inputMitarbeiter13").checked;
            var mitarbeiter46 = document.getElementById("inputMitarbeiter46").checked;
            var mitarbeiter710 = document.getElementById("inputMitarbeiter710").checked;
            var anbauart = document.getElementById("inputAnbau").value;
            var story = document.getElementById("inputStory").value;

            // Create the hofinfo object to send to the database
            var hofinfo = {
                hofname: hofname,
                hausnummer: hausnummer,
                plz: plz,
                straße: adresse,
                stadt: stadt,
                zertNachh: zertNachh,
                zertBio: zertBio,
                zertoGent: zertoGent,
                zertRegio: zertRegio,
                mitarbeiter13: mitarbeiter13,
                mitarbeiter46: mitarbeiter46,
                mitarbeiter710: mitarbeiter710,
                anbauart: anbauart,
                story: story,
                userId: currentUser.uid,
            };

            firebasetools.updateContentItem("hofinfos", userHof.id, hofinfo);
            document.getElementById("hofDataSaved").innerText = "Deine Daten wurden gepeichert.";
            console.log("Hofinfo item successfully updated!");
        }
        var userLoc = null;

        function getLocationUser() {
            firebase.firestore().collection("locations")
                .where("userId", "==", currentUser.uid).get().then((querySnapshot) => {

                    // Wenn bereits ein Marker existiert, speichere das Objekt
                    if (querySnapshot.docs.length > 0) {

                        querySnapshot.forEach(function(doc) {
                            console.log(doc.id, " => ", doc.data());
                            userLoc = doc.data();
                            userLoc.id = doc.id;
                        });

                        fillFormValuesLoc();

                        var updateLocBtn = document.querySelector("#btnLoc");
                        updateLocBtn.removeEventListener("click", saveLocation);
                        updateLocBtn.addEventListener("click", updateLocation);
                    }
                    else {
                        console.log("Kein Marker angelegt bisher.");
                    }
                });
        }

        function fillFormValuesLoc() {
            var hofname = document.getElementById("inputHofname");
            var hausnummer = document.getElementById("inputHnummerHof");
            var plz = document.getElementById("inputPLZHof");
            var adresse = document.getElementById("inputAdresseHof");

            /* Update the location object to send to the database */
            hofname.value = userLoc.title;
            hausnummer.value = userLoc.street_no;
            plz.value = userLoc.zip;
            adresse.value = userLoc.street;
        }

        function saveLocation() {
            //Set collection name
            var collectionName = "locations";
            
            // Get the values from the form elements
            var hofname = document.getElementById("inputHofname").value;
            var hausnummer = document.getElementById("inputHnummerHof").value;
            var plz = document.getElementById("inputPLZHof").value;
            var adresse = document.getElementById("inputAdresseHof").value;
            var type = "farm";

            console.log(hofname);
            console.log(hausnummer);
            console.log(plz);
            console.log(adresse);
            console.log(type);

            /* Create the location object to send to the database */
            var location = {
                title: hofname,
                street_no: hausnummer,
                zip: plz,
                street: adresse,
                type: type,
                userId: currentUser.uid,
            };
            /* Print the location to the console for debugging */
            console.dir(location);

            firebasetools.addContentItem("locations", location, locationItemAdded);
        }

        function locationItemAdded() {
            console.log("Location item successfully added!");
            location.reload();
            document.getElementById("hofPositionSaved").innerText = "Der Standort deines Hofes wurde erfolgreich gespeichert.";
        }

        function updateLocation() {

            var hofname = document.getElementById("inputHofname").value;
            var hausnummer = document.getElementById("inputHnummerHof").value;
            var plz = document.getElementById("inputPLZHof").value;
            var adresse = document.getElementById("inputAdresseHof").value;
            var type = "farm";

            console.log(hofname);
            console.log(hausnummer);
            console.log(plz);
            console.log(adresse);
            console.log(type);

            /* Create the location object to send to the database */
            var location = {
                title: hofname,
                street_no: hausnummer,
                zip: plz,
                street: adresse,
                type: type,
                userId: currentUser.uid,
            };

            firebasetools.updateContentItem("locations", userLoc.id, location);

            console.log("Location item successfully updated!");

            document.getElementById("hofPositionSaved").innerText = "Der Standort deines Hofes wurde erfolgreich aktualisiert.";
        }

        /* This is called if something goes wrong. */
        function handleError(error) {
            console.error(error.code + ": " + error.message);
        }
    </script>
</body>

</html>
