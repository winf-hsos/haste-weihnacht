<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" shrink-to-fit="no">

    <!--Sylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Kodchasan|Roboto" rel="stylesheet">
    <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!--Shortcuticon/favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">
    <title>hasteWeihnacht by Hochschule Osnabrück</title>
</head>

<body>
    <div class="container-fluid">
        <div class="backgroundHeadLanding">
            <div><br></div>

            <div class="row" id="header">
                <div class="col-md-4 mobileReadyCol-4">
                    <h3>
                        <a id="titlePage" href="index.html"> Hochschule Osnabrück |&nbsp;<span style="color:#CC0C0C">hasteWeihnacht</span> </a>
                    </h3>
                </div>
                <div class="col-md-8 respnav-right mobileReadyCol-8" id="navigationCol" hidden>


                    <nav class="navbar navbar-expand-sm navbar-light bg-light">

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>

                        <div class="collapse navbar-collapse respnav-right" id="navbarSupportedContent">
                            <ul class="navbar-nav mr-auto nav-right">
                                <li class="nav-item active"> <a id="loginHidden" data-toggle="modal" data-target="#loginModal" href="#">Einloggen</a>
                                    <a id="homeHidden" href="index.html" hidden> Home</a>

                                </li>
                                <li class="nav-item">
                                    <a id="registerHidden" data-toggle="modal" data-target="#registerModal" href="#">Registrieren</a>
                                    <a id="myAccountHidden" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#" hidden>Mein Account
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item" href="registration.html">Mein Profil</a>
                                    <a class="dropdown-item" href="seller.html">Accountmanagement</a>
                                    <a class="dropdown-item" href="productoffer.html">Produktsuche</a>
                                    <a class="dropdown-item" id="logoutHidden" onclick="logout()" href="#" hidden>
                                        <hr>Ausloggen</a>
                        </div>
                        </a>
                        </li>
                        <li class="nav-item"><a href="inprogress.html">Hilfe</a></li>
                        <li class="nav-item"><a href="team.html">About us</a></li>
                        </ul>
                </div>
                </nav>
            </div>
        </div>

        <div class="row searchBox">
            <div class="col-md-6 box-transparent">
                <div class="col-md-12 title">
                    <h>Finde dein Produkt...</h>
                    <p class="pbox">Erlebe die besondere Qualität und Vielfalt aus deiner Region. Probier`s aus!
                    </p>
                    <div class="row">
                        <div class="form-group col-md-5">
                            <label for="inputUpdateProductName"></label>
                            <input type="text" class="form-control" id="inputSearchProductName" placeholder="Suche dein Produkt...">
                        </div>
                        <div class="form-group col-md-5">
                            <label for="inputUpdateProductCategory"></label>
                            <select class="form-control" id="inputUpdateProductCategory" placeholder="Wähle eine Kategorie">
                    <option>Wähle eine Kategorie</option>
                    <option>Getränke</option>
                    <option>Obst & Gemüse</option>
                    <option>Snacks</option>
                    <option>Handmade Produkte</option>
                    <option>Sonstige</option>
                    </select>
                        </div>
                        <div class="col-md-2 searchButtonPosition"><button onclick="startSearch()" class="btn btn-danger ">Los</button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Register -->
    <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title col-md-12 modalTitleCenter">Registrierung</h5>
                </div>
                <div class="modal-body">
                    <div>
                        <h2 class="headParagraphModal"><span class="headParagraphModal" style="color:#CC0C0C">haste</span>&nbsp;|&nbsp;Interesse?</h2>
                        <p class="lp">
                            Dann registrier dich gleich, um Produkte kaufen oder verkaufen zu können. Sei dabei und unterstütze den Direktvertrieb von regionalen Produkten.
                        </p>
                    </div>
                    <div class="col-md-12 modalFormPosition">
                        <div class="formRegisterLogin">
                            <div class="form-group">
                                <label for="inputEmail"></label>
                                <input type="email" class="form-control" id="inputEmail" placeholder="Enter E-Mail" />
                            </div>
                            <div class="form-group">
                                <label for="inputPassword"></label>
                                <input type="password" class="form-control" id="inputPassword" placeholder="Enter Password" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <!-- When this is clicked, register() is called -->
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button id="btnRegister" onclick="register()" class="btn btn-danger" role="button">Registrieren</button>
                    
                    <!-- When this is clicked, sendVerificationEMail() is called -->
                    <a id="btnVerify" onclick="sendVerificationEMail()" href="/accManage.html" class="btn btn-danger" hidden>Email verifizieren</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal login -->
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title col-md-12 modalTitleCenter">Login</h5>
                </div>
                <div class="modal-body">
                    <div class="col-md-12" id="loginPic">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="160" height="160" viewBox="0 0 100 100"><g><g transform="translate(50 50) scale(0.69 0.69) rotate(0) translate(-50 -50)" style="fill:#000000;"><svg fill="#000000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;" viewBox="0 0 229 285" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd"><defs><style type="text/css"> .fil0 {fill:#000000} </style></defs><g><path class="fil0" d="M229 88c-3,-5 -33,-12 -57,2 -10,5 -16,11 -19,17 -4,-4 -8,-8 -13,-11 35,-20 71,-46 71,-91 0,-7 -11,-7 -11,0 0,27 -16,47 -34,61 3,-17 2,-36 0,-53 -1,-7 -11,-6 -10,1 2,19 3,43 -3,62 -7,5 -15,9 -22,13 -1,1 -1,1 -2,2 -5,-2 -9,-3 -14,-3 -5,0 -10,1 -15,3 0,-1 -1,-1 -1,-2 -8,-4 -16,-8 -23,-13 -6,-19 -4,-43 -2,-62 1,-7 -10,-8 -11,-1 -2,17 -3,36 0,53 -18,-14 -34,-34 -34,-61 0,-7 -10,-7 -10,0 0,45 36,71 70,91 -4,3 -9,7 -13,11 -3,-6 -9,-12 -19,-17 -24,-14 -54,-7 -56,-2 -3,5 6,34 30,48 7,4 14,7 20,7 -13,25 -20,53 -20,74 0,91 168,91 168,0 0,-21 -8,-49 -20,-74 5,0 12,-3 20,-7 24,-14 33,-43 30,-48zm-114 116c22,0 40,15 40,32 0,18 -18,32 -40,32 -23,0 -41,-14 -41,-32 0,-18 18,-32 41,-32zm0 8c9,0 17,5 17,11 0,6 -8,10 -17,10 -10,0 -18,-4 -18,-10 0,-6 8,-11 18,-11zm24 -54c-5,0 -10,5 -10,11 0,5 5,10 10,10 6,0 11,-5 11,-10 0,-6 -5,-11 -11,-11zm-49 0c6,0 10,5 10,11 0,5 -4,10 -10,10 -6,0 -10,-5 -10,-10 0,-6 4,-11 10,-11zm103 59c0,-21 -7,-46 -16,-64 -10,-23 -33,-60 -62,-60 -29,0 -52,37 -63,60 -8,18 -16,43 -16,64 0,84 157,84 157,0z"></path></g></svg></g>
                        </g>
                        </svg>
                    </div>
                    <!-- When this is clicked, validate() is called -->
                    <p>Melde dich an, wenn du über ein Konto verfügst oder <a class="linkStyle" href="#">registriere dich</a> jetzt kostenlos! </p>
                    <div class="col-md-12 modalFormPosition">
                        <form class="formRegisterLogin">

                            <input type="email" name="usermail" id="userMail" class="form-control" aria-describedby="emailHelp" placeholder="Email" /><br>
                            <input type="password" name="pswrd" id="userPassword" class="form-control" placeholder="Password" />
                        </form>
                    </div>
                    <br>
                    <div class="col-md-12 modalFormPosition">
                        <p style="color:#CC0C0C" id="errorLogin"></p>
                    </div>
                    <p>Nutze alternativ die Anmeldung über Dritte:</p>
                    <div class="col-md-12 headThirdParty">
                        <h5>Social Login</h5>
                    </div>
                    <div class="col-md-12 socialLogin">
                        <img class="socialSymbols" src="img/social_logos/facebookloginws.png" alt="pic">&nbsp;&nbsp;&nbsp;&nbsp;
                        <img class="socialSymbols" src="img/social_logos/twitterloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                        <img class="socialSymbols" src="img/social_logos/instaloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                        <img class="socialSymbols" src="img/social_logos/googleloginws.png" alt="pic"> &nbsp;&nbsp;&nbsp;&nbsp;
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="clear()" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button onclick="validate()" value="Login" class="btn btn-danger">Login</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Productinformation -->
    <div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title col-md-12 modalTitleCenter" id="productInfoTitle"></h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-3">
                            <h10 class="productInfoModalHeadline">Kategorie:</h10>
                            <p id="productInfoCat"></p>
                        </div>
                        <div class="col-md-3">
                            <h10 class="productInfoModalHeadline">Produktpreis</h10>
                            <p id="productInfoPrice"></p>
                        </div>
                        <div class="col-md-6">
                            <h10 class="productInfoModalHeadline">Produkt wurde eingestellt am:</h10>
                            <p id="productInfoDate"></p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h10 class="productInfoModalHeadline">Produktbeschreibung:</h10>
                            <p id="productInfoDesc"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="clear()" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button onclick="buy()" class="btn btn-danger">In den Einkaufswagen</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="news">

        <!--- Spalte Verkäufer Infos --->
        <div class="col-md-4">
            <h2 class="lph"><span class="lph" style="color:#CC0C0C">haste</span>&nbsp;|&nbsp;Angebot?</h2>
            <p class="lp">
                Dann sei dabei und nutze jetzt die Gelegenheit deine Produkte direkt an Menschen in deiner Region zu vermarkten. Stelle sicher, dass sie die Qualität erhalten, mit der deine Produkte den Hof verlassen!
                <br><br> Lerne deine zukünftigen Kunden kennen und zeige ihnen, wie viel Liebe und Herzblut in deinem Produkt steckt! </p>
            <br><br>
            <button data-toggle="modal" data-target="#registerModal" class="btn btn-danger">Jetzt Anbieter werden</button>

           
        </div>

        <!--- Spalte Newsletteranmeldung --->
        <div class="col-md-4">
            <h2 class="lph"><span class="lph" style="color:#CC0C0C">haste</span>&nbsp;|&nbsp;News?</h2>
            <div id="mc_embed_signup">
                <form action="https://firebaseapps.us8.list-manage.com/subscribe/post?u=45f10611ae1a36c0344421d1d&amp;id=d1cc12b3db" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                    <div id="mc_embed_signup_scroll">
                        <div class="form-group">
                            <label for="mce-EMAIL">E-Mail Addresse</label>
                            <input type="email" class="form-control" id="mce-EMAIL" name="EMAIL" value="" placeholder="Deine E-Mail">
                        </div>
                        <div class="form-group">
                            <label for="mce-FNAME">Vorname</label>
                            <input type="text" class="form-control" id="mce-FNAME" name="FNAME" value="" placeholder="Vorname">
                        </div>
                        <div class="form-group">
                            <label for="mce-LNAME">Nachname</label>
                            <input type="text" class="form-control" id="mce-LNAME" name="LNAME" value="" placeholder="Nachname">
                        </div>
                        <div class="form-group">
                            <label for="mce-MMERGE5">Deine Rolle</label>
                            <select name="MMERGE5" id="mce-MMERGE5" class="custom-select">
                                  <option value="">Bitte wählen</option>
                                  <option value="Besucher">Besucher</option>
                                  <option value="Anbieter (Direktvermarkter)">Anbieter (Direktvermarkter)</option>
                                </select>
                        </div>
                        <div class="form-group" id="mergeRow-gdpr">
                            <p>Einverständniserklärung</p>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="gdpr_9153" name="gdpr[9153]" value="Y">
                                <label class="custom-control-label" for="gdpr_9153">Ihr dürft mich per E-Mail kontaktieren</label>
                            </div>
                        </div>
                        <div id="mce-responses" class="clear">
                            <div class="response" id="mce-error-response" style="display:none"></div>
                            <div class="response" id="mce-success-response" style="display:none"></div>
                        </div>
                        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_45f10611ae1a36c0344421d1d_d1cc12b3db" tabindex="-1" value=""></div>
                        <div class="clear">
                            <input class="btn btn-danger" type="submit" value="Anmelden" name="subscribe" id="mc-embedded-subscribe">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!--- Spalte Käufer Infos --->
        <div class="col-md-4">
            <h2 class="lph"><span class="lph" style="color:#CC0C0C">haste</span>&nbsp;|&nbsp;Lust?</h2>
            <p class="lp">
                Dann unterstütze deine Region und erhalte im Gegenzug frische, qualitativ hochwertige Produkte von Anbietern in deiner Umgebung!
                <br><br> Überzeuge dich selbst!<br> Melde dich an und erhalte eine Übersicht über alle regionalen Produzenten die schon dabei sind. Bestelle bereits im voraus einzigartige Produkte, die nur auf deine Abholung warten.</p>
            <br><br>
            <button data-toggle="modal" data-target="#registerModal" class="btn btn-danger">Jetzt Produkte erwerben</button>
        </div>
    </div>

    <!--Artikel-->
    <div class="row">
        <div class="col-md-12">
            <hr>
            <h2 class="lph"><span class="lph" style="color:#CC0C0C">Neusten</span>&nbsp;|&nbsp;Produkte</h2>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="card-deck" id="latestProductsDiv">
        </div>
    </div>
    <hr>
    <div class="row" style="margin-top: 32px;">
        <div class="col">
            <!-- This is where the map will show up -->
            <div id="map"></div>
        </div>
    </div>
    </div>
    <hr>

    <!--- FOOTER --->
    <div class="row justify-content-center" id="footer">
        <div class="col-md-2">
            <h4>Unser Netzwerk</h4>
            <ul id="network">
                <li><a href="inprogress.html"></a></li>
                <li><a href="inprogress.html">Hilfe</a></li>
                <li><a href="inprogress.html">Impressum</a></li>
            </ul>
        </div>
        <div class="col-md-2">
            <h4>Wir über uns</h4>
            <ul id="aboutus">
                <li><a href="team.html">Unser Team</a></li>
                <li><a data-toggle="modal" class="links" href="team.html">Unsere Geschichte</a></li>
                <li><a href="https://www.hs-osnabrueck.de/" target="_blank">Unsere Hochschule</a></li>
            </ul>
        </div>
        <div class="col-md-2">
            <h4>Kontakt</h4>
            <ul id="contact">
                <li><a href="#">info@hasteweihnacht.de</a></li>
                <li><a href="https://www.hs-osnabrueck.de/">Hochschule</a></li>
            </ul>
        </div>
    </div>
    <div class="row" id="legalfooter">
        <div class="col-md-12">
            <ul id="legalnav">
                <li><img src="img/social_logos/instagram.png" alt="pic" class="social"></li>
                <li><img src="img/social_logos/twitter.png" alt="pic" class="social"></li>
                <li><img src="img/social_logos/facebook.png" alt="pic" class="social"></li>
                <li><a href="inprogress.html">Datenschutz</a></li>
                <li><a href="inprogress.html">Nutzungsbedingungen</a></li>
            </ul>
        </div>
    </div>
    </div>
    </div>
    <script src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
    <script>
        (function($) {
            window.fnames = new Array();
            window.ftypes = new Array();
            fnames[0] = 'EMAIL';
            ftypes[0] = 'email';
            fnames[1] = 'FNAME';
            ftypes[1] = 'text';
            fnames[2] = 'LNAME';
            ftypes[2] = 'text';
            fnames[3] = 'ADDRESS';
            ftypes[3] = 'address';
            fnames[4] = 'PHONE';
            ftypes[4] = 'phone';
            fnames[5] = 'MMERGE5';
            ftypes[5] = 'dropdown';
        }(jQuery));
        var $mcj = jQuery.noConflict(true);
    </script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!--Script for using firebase-->
    <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>

    <!-- Firebase Tools for simpler usage -->
    <script src="https://cdn.jsdelivr.net/gh/winf-hsos/firebase-tools/src/firebase-tools.js"></script>

    <script src="js/customer.js"></script>

    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIwQQ8uhzd3vMVOAkB19Vo6t9l8mSBJPk&callback=initMap" async defer></script>
    <script>
        /*global firebase*/
        /*global firebasetools*/
        /* Required code for using firestore */
        {
            var db = firebase.firestore();
            const settings = { timestampsInSnapshots: true };
            db.settings(settings);
        }
        readProducts();

        function readProducts() {
            console.log("Reading Products from database.");
            firebasetools.getContentItems("products", listProducts);
        }

        function listProducts(productCollection) {
            console.dir(productCollection);

            var sorted = firebasetools.sortArrayBy(productCollection, "time");

            allProducts = sorted;


            for (var i = 0; i < 5; i++) {
                createProductCard(sorted[i]);
            }
        }

        function createProductCard(product) {

            var div = document.querySelector('#latestProductsDiv');


            var createProduktImg = function() {
                start = 1;

                var anzahlbilder = 18;
                var zufallszahl = Math.floor(Math.random() * (anzahlbilder - start + 1)) + start;
                var zufallsbild = "img/product_examples/" + zufallszahl + ".jpeg";
                return zufallsbild
            }

            var html =
                '<div class="box">' +
                '<img class="artikelImg" src="' + createProduktImg() + '" alt="Card image cap">' +
                '<div class="box-content">' +
                '<h1 class="titleCard" id="productName">' + product.name + '</h1>' +
                '<p class="description" id="productText">' + product.price + ' €/kg </p>' +
                '<div class="row cardRow">' +
                '<a href="#" onclick="updateModal(\'' + product.id + '\')" data-toggle="modal" data-target="#productModal" class="read-more">Details</a>' +
                '<div class="col-md-4">' +
                '<button onClick="buy()" class="buyBasket"></button></div></div></div>' +
                '<div class="card-footer">' +
                '<small class="text-muted">Eingestellt am &nbsp' + product.date + '</small>' +
                '</div>' +
                '</div>';

            var cardDiv = document.createElement('div');
            cardDiv.classList.add("col-md-2");
            cardDiv.classList.add("latestProductsCol");
            cardDiv.innerHTML = html;

            div.appendChild(cardDiv);
        }
        //----------------------------------------------------------------------------

        function updateModal(productId) {

            // Hole products aus Array
            var product;
            for (var i = 0; i < allProducts.length; i++) {
                if (allProducts[i].id == productId)
                    product = allProducts[i];
            }

            var productInfoModal =
                document.getElementById("productInfoTitle").innerText = product.name;
            document.getElementById("productInfoDesc").innerText = product.text;
            document.getElementById("productInfoDate").innerText = product.date;
            document.getElementById("productInfoCat").innerText = product.category;
            document.getElementById("productInfoPrice").innerText = product.price + "€/kg";

        }


        var map;
        /* This function is called when the 
         * Google Map API has finished loading */
        function initMap() {

            getPosition(updateMap);
        }

        /* This function retrieves the position from the device
         * and calls the given callback function on success */
        /* global google, navigator */
        function getPosition(callback) {
            if ("geolocation" in navigator) {
                /* geolocation is available */
                console.log("Geolocation is available");
                navigator.geolocation.getCurrentPosition(function(position) {
                    console.dir(position);
                    callback(position.coords.latitude, position.coords.longitude);
                });
            }
            else {
                /* geolocation IS NOT available */
                console.log("Geolocation is not available");
                callback(-1, -1);
            }
        }
        /* This function sets the center of the map 
         * to the given coordinates and adds markers with 
         * simple info boxes */
        function updateMap(latitude, longitude) {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: latitude, lng: longitude },
                zoom: 12
            });
            /* Create a simple marker showing the current location */
            var marker = new google.maps.Marker({
                position: { lat: latitude, lng: longitude },
                map: map,
                title: 'My Position'
            });
            /* Create a info message that shows up above the marker */
            var contentString = "<h4>Your current location</h4>" +
                "<p>Based on your device's info, the marker shows where <b>you</b> are currently.</p>";
            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });
            //addMarkerAtAddress("Am Tannenkamp 75c, 49088 Osnabrück");
            /* Get locations from the database and add markers */
            getLocationsFromDatabase();
        }

        function getLocationsFromDatabase() {
            firebasetools.getContentItems("locations", addMarkersForLocations);
        }

        function addMarkersForLocations(locations) {
            console.dir(locations);
            locations.forEach((l) => {
                var address = l.street + " " + l.street_no + ", " + l.zip;
                addMarkerAtAddress(address, l.title);
            });
        }
        /* Add a marker at a given address as text */
        function addMarkerAtAddress(addressText, title) {
            var geocoder = new google.maps.Geocoder();
            if (!title)
                title = '<b>' + addressText + '</b>';
            else
                title = '<b>' + title + '</b>';
            geocoder.geocode({
                'address': addressText
            }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
                        console.log(results[0].geometry.location);
                        /* Uncomment this line if you want to center the map around the address */
                        //map.setCenter(results[0].geometry.location);
                        var infowindow = new google.maps.InfoWindow({
                            content: '<a href="/index.html">' + title + '</a><br/>',
                            size: new google.maps.Size(150, 50)
                        });
                        var marker = new google.maps.Marker({
                            position: results[0].geometry.location,
                            map: map,
                            title: addressText
                        });
                        google.maps.event.addListener(marker, 'click', function() {
                            infowindow.open(map, marker);
                        });
                    }
                    else {
                        console.error("No results found");
                    }
                }
                else {
                    console.error("Geocode was not successful for the following reason: " + status);
                }
            });
        }

        function buy() {
            alert("Das Produkt wurde hinzugefügt");
            $('#productModal').modal('hide')
        }
    </script>
</body>

</html>
